% secant_iterative.m
% Решение трансцендентного уравнения: exp(x) + log(x) - 10*x = 0
% с использованием метода секущих.
% Исходные данные:
%   Начальные приближения: x0 = 3, x1 = 4
%   Точность: tol = 1e-4
%   Максимальное число итераций: 100

% Определяем функцию
f = @(x) exp(x) + log(x) - 10*x;

% Начальные приближения
x0 = 3;
x1 = 4;
tol = 1e-4;
max_iter = 100;

iter = 0;
data = []; % для хранения истории итераций

fprintf(' Итерация       x_n          f(x_n)\n');
fprintf('----------------------------------------\n');

while iter < max_iter
    f0 = f(x0);
    f1 = f(x1);
    if (f1 - f0) == 0
        error('Обнаружено деление на 0. Метод не может продолжаться.');
    end
    
    % Формула метода секущих
    x2 = x1 - f1 * (x1 - x0) / (f1 - f0);
    iter = iter + 1;
    
    % Запись результатов итерации
    data = [data; iter, x2, f(x2)]; 
    fprintf('   %2d      %.6f   %.6e\n', iter, x2, f(x2));
    
    if abs(x2 - x1) < tol
        break;
    end
    
    % Обновление приближений
    x0 = x1;
    x1 = x2;
end

% Построение графиков: 
%  - График изменения приближённого значения корня с номером итерации
%  - График изменения модуля значения функции
figure;
subplot(2,1,1);
plot(data(:,1), data(:,2), '-o');
xlabel('Номер итерации');
ylabel('Приближение x_n');
title('График последовательных приближений (метод секущих)');
grid on;

subplot(2,1,2);
plot(data(:,1), abs(data(:,3)), '-o');
xlabel('Номер итерации');
ylabel('|f(x_n)|');
title('Значения функции на последовательных приближениях');
grid on;
